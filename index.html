<!DOCTYPE html>

<html>
	<head>
		<title>Jquery Code Player</title>		
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">

	    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	    <!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<!-- Optional theme -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
		<link rel="stylesheet" href="./jquery-ui-1.12.1/jquery-ui.css"/>
		<link rel="stylesheet" href="styles/styles.css">
	</head>
	<body>

	<!--<div class="selectors">
					<div id="html">
						<p>HTML</p>
					</div>
					<div class="selectors" id="css">
						<p>CSS</p>
					</div>
					<div class="selectors" id="js">
						<p>JS</p>
					</div>
					<div class="selectors" id="preview">
						<p>Preview</p>
					</div>	
				  </div>-->
		<div class="container-fluid">
			<div class="row text-center header">
				<div class="col-md-12">
				  <div id="wrapper">
					  <ul id="horizontal-list">
					  	<li id="html">HTML</li>
					  	<li id="css">CSS</li>
					  	<li id="js">JavaScript</li>
					  	<li id="preview">Preview</li>
					  </ul>
				  </div>
				</div>
			</div>
		</div>
		<div class="code-area">
			<table class="code-table">
				<tr>
					<td class="panel" id="html-column">
						<div>
							<h3 class="panel-header">HTML</h3>
							<textarea id="html-input"></textarea> 
						</div>
					</td>
					<td class="panel" id="css-column">
						<div>
							<h3 class="panel-header">CSS</h3>
							<textarea id="css-input"></textarea> 
						</div>
					</td>
					<td class="panel" id="js-column">
						<div>
							<h3 class="panel-header">JavaScript</h3>
							<textarea id="js-input"></textarea> 
						</div>
					</td>
					<td class="panel" id="preview-column">
						<div>
							<h3 class="panel-header">Preview</h3>
							<iframe id="panel-out"></iframe>
							</div> 
						</div>
					</td>
				</tr>
			</table>
		</div>

		<!--javascript-->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
		<!-- Latest compiled and minified JavaScript -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
		
		<script src="./jquery-ui-1.12.1/jquery-ui.js"></script>
		<script>


			$(document).ready(function(){

				updateOutput();

				var htmlView = true;
				var cssView = true;
				var jsView = true;
				var previewView = true;

				$("#html").click(function(){
					if (htmlView) {
						$("#html-column").hide();
						$("#html").css({"opacity":0.7});
						htmlView = false;
					} else {
						$("#html-column").show();
						$("#html").css({"opacity":1});
						htmlView = true;
					}
				});

				$("#css").click(function(){
					if (cssView) {
						$("#css-column").hide();
						$("#css").css({"opacity":0.7});
						cssView = false;
					} else {
						$("#css-column").show();
						$("#css").css({"opacity":1});
						cssView = true;
					}
				});

				$("#js").click(function(){
					if (jsView) {
						$("#js-column").hide();
						$("#js").css({"opacity":0.7});
						jsView = false;
					} else {
						$("#js-column").show();
						$("#js").css({"opacity":1});
						jsView = true;
					}
				});

				function updateOutput() {
					
					$("#panel-out").contents().find("html").html(

						'<html>' + 
						  '<head>' + 
						    '<style type="text/css">' + 
						      $("#css-input").val() +
						    '</style>' +
						  '</head>' +
						  '<body>' + $("#html-input").val() +
						  '</body>' +
						'</html>'

						);

					document.getElementById("panel-out").contentWindow.eval($("#js-input").val());

				}

				$("#preview").click(function(){
					if (previewView) {
						$("#preview-column").hide();
						$("#preview").css({"opacity":0.7});
						previewView = false;
					} else {
						$("#preview-column").show();
						$("#preview").css({"opacity":1});
						previewView = true;
					}
				});


				$(".panel").width("25%");

				var panels = ["#html-input","#css-input","#js-input"];

				panels.map(function(panel){
					$(panel).keyup(function(){
						updateOutput();
					})
				});

			});
			
		</script>
	</body>
</html>